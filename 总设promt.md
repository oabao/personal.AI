生成promt的promt：
```
附件是《总设任务书》的模板，每一小节都有蓝色字体填写说明，请根据该模板及上述理解生成大模型提示词，确保可以根据用户的输入完全按照模板生成符合实际业务的《总设任务书》，提示词使用markdown格式输出，提示词要严谨、正规，不包含过于口语化和引入和用户输入无关的内容，提示词需要对每一章节剔除明确输出内容要求，格式要求，评判标准等，确保大模型使用该提示词最终输出内容完整合理，有些章节需要根据用户的输入生成多个章节，提示词需要有明确描述，确保使用该提示词的大模型可以自行增加章节补充内容，模板涉及技术选型的章节让大模型在完成编写前提前规划，根据项目实际情况确定哪些方案需要进行选型，不要出现无效选型，最终整合完整文档输出
```

# 生成的promt：
```
## 一、核心目标

基于用户输入的项目信息（含项目类型、需求文档概要、架构影响度、核心功能模块、是否涉及中台/托管云等），严格遵循《SFRD-TS-01-3.2_XXX版本总体设计说明书》模板规范，生成符合实际业务需求的《总设任务书》。文档需无空章节（不涉及内容需明确说明原因），技术选型无无效方案，可根据用户输入自动补充多小节内容，整体逻辑严谨、格式规范。

## 二、章节输出要求（含内容、格式、评判标准）

### 1. 引言

#### 1.1 目的

- **输出内容要求**：明确《总设任务书》的编写目的（如指导后续总体设计、明确设计边界等），指定使用对象（如项目技术经理、架构师、开发工程师等），说明总设输入（系统需求文档、专家评审后的设计思路）与总设输出（模块划分、模块间接口、系统流程）。

- **格式要求**：自然段表述，需包含“目的”“使用对象”“总设输入”“总设输出”4个核心要点。

- **评判标准**：要点无遗漏，与用户输入的项目类型（如业务增量版、重构版、中台项目）匹配，无无关表述。

#### 1.2 适用范围和评审要求

##### 1.2.1 适用范围

- **输出内容要求**：根据用户输入的“项目迭代需求对架构的影响度”，参照以下规则明确总设编制策略，若用户输入多个影响场景，需分点对应说明：

|    场景类型|    总设编制策略|
|---|---|
|    需求开发对产品架构大面积调整|    做全新总体设计（无论历史是否有总设）|
|    未大幅改动架构，新增多模块（>2个）/小幅改模块，或涉及跨部门多模块协同|    前置有总设则刷新，无则全新编制|
|    仅调整少量模块（≤2个）或新增少数模块|    前置有总设则刷新，无则直接做概要设计（不做总设）|
|    仅零散改动原有模块，不涉及架构变动|    不做总设|
- **格式要求**：采用表格+自然段补充说明（说明用户项目匹配的场景及对应策略）。

- **评判标准**：场景匹配准确，策略符合SFRD-TS-01-3.2模板规则，无逻辑矛盾。

##### 1.2.2 评审要求

- **输出内容要求**：明确总设评审流程（统一提交电子流，由TMO组织TMG评审），说明默认参与评审人员（可靠性TMG陈杰），若用户输入特殊评审需求（如额外评审角色），需补充说明。

- **格式要求**：分点表述，核心信息加粗（如**TMO组织TMG评审**、**默认陈杰参与**）。

- **评判标准**：覆盖模板强制要求，补充内容与用户输入一致。

#### 1.3 定义和缩写

- **输出内容要求**：列出文档中所有专用名词（如“DFX”“STRIDE”“Mend扫描”等）及缩略语，需结合用户输入的项目技术栈补充专属术语（如项目涉及“托管云”需定义“托管云接口人”）。

- **格式要求**：标准markdown表格，列名为“缩写名/名词”“描述”“备注（项目关联说明）”。

- **评判标准**：术语无遗漏，描述准确，备注与项目强相关。

#### 1.4 参考和引用

- **输出内容要求**：列出编写任务书需参考的文档（如系统需求文档、《深信服故障模式库》、技术规范基线、用户提供的外部参考文档等），需明确文档名称、版本号（若有）、获取路径（如内网链接、附件编号）。

- **格式要求**：标准markdown表格，列名为“参考文档名称”“版本号”“获取路径”“用途说明”。

- **评判标准**：参考文档与总设内容直接相关，无无效引用。

#### 1.5 总设任务书核心目标

- **输出内容要求**：

    1. 通用目标：覆盖模板12项核心目标（性能、资源开销、可靠性、架构要求、可运维性、可测试性、可扩展性、可调试性、兼容性、安全性、可重用性、其它要求），每项目标需量化（如“可调试性：进程崩溃问题5分钟定位，90%问题可通过日志定位”）。

    2. 中台项目额外目标：若用户输入为“中台项目”，需补充7项目标（运行环境要求、交付形式、合入/升级效率、对外接口、测试自动化率、落地应用DEMO、中台确认人），每项需明确具体标准（如“交付形式：二进制程序+运维手册，随版本发布交付”）。

- **格式要求**：分“通用目标”“中台项目额外目标（若适用）”两部分，每部分用标准markdown表格，列名为“编号”“目标项概述”“标准要求”“验证方式”。

- **评判标准**：目标可量化、可验证，无空项，中台目标仅在用户输入为中台项目时出现。

#### 1.6 中台复用需求

- **输出内容要求**：

    1. 若用户输入“需使用中台”：明确使用的中台名称、中台确认人，说明与中台接口人的对接进度（如“已与谢奕勇（18959）确认，中台复用方案待评审”），需填写“研发现有中台查询地址：[ts.sangfor.com](http://ts.sangfor.com)（内网）”。

    2. 若用户输入“无需使用中台”：说明原因（如“项目功能独立，无现有中台可复用”）。

    3. 若用户输入“待确认”：说明下一步动作（如“需联系中台接口人谢奕勇（18959）评估复用可行性”）。

- **格式要求**：标准markdown表格，列名为“使用中台名称”“中台确认人”“复用状态/说明”。

- **评判标准**：符合模板“中台确认人约束”要求，说明逻辑清晰。

#### 1.7 托管云需求

- **输出内容要求**：

    1. 若用户输入“需上托管云”：明确需提交的资料（《SFRD-TS-02-2.1-客户信息-IT调研基础设施环境调研》）、资料下载链接（[https://cms.atrust.sangfor.com/pages/viewpage.action?pageId=46981063](https://cms.atrust.sangfor.com/pages/viewpage.action?pageId=46981063)），说明托管云接口人评估结果（如“已评估，需适配操作系统版本至CentOS 8.5”）。

    2. 若用户输入“无需上托管云”：说明原因（如“项目部署于客户本地服务器，不涉及托管云”）。

- **格式要求**：标准markdown表格，列名为“是否需要上托管云”“需提交资料/说明”“评估结果/原因”。

- **评判标准**：资料名称、链接准确，评估结果/原因与项目需求匹配。

### 2. 产品介绍

#### 2.1 产品名称、型号、代号

- **输出内容要求**：根据用户输入的项目信息，明确产品全称、型号（如“XXX-Enterprise V3.0”）、内部代号（如“Project Alpha”），无代号需说明“无内部代号”。

- **格式要求**：自然段表述，核心信息加粗。

- **评判标准**：信息与用户输入完全一致，无歧义。

#### 2.2 对应需求文档

- **输出内容要求**：列出总设对应的所有需求文档（含用户输入的需求文档名称、版本号、编制日期），若有多个文档需全部列出。

- **格式要求**：标准markdown表格，列名为“需求文档名称”“版本号”“编制日期”“关联总设章节”。

- **评判标准**：文档无遗漏，“关联总设章节”与后续章节对应准确。

#### 2.3 关键应用场景

- **输出内容要求**：根据用户输入的应用场景（若多个场景，需自动新增“2.3.1 场景1”“2.3.2 场景2”等小节），每个场景需包含“场景描述”“对系统设计的影响”（如“场景1：高并发数据转发——需设计负荷分担架构，确保PPS≥100万”）。

- **格式要求**：分小节表述，每小节含“场景描述”“设计影响”2个二级要点。

- **评判标准**：场景覆盖项目核心功能，设计影响分析与后续硬件/软件方案呼应。

#### 2.4 关键技术及解决途径

- **输出内容要求**：列出项目核心技术（如“流缓存加速算法”“分布式一致性协议”），简要说明技术原理及解决的业务问题，需引用相关技术资料（如“参考《深信服流缓存技术白皮书V2.1》”）。

- **格式要求**：分点表述，每点含“关键技术”“原理概要”“解决问题”“参考资料”。

- **评判标准**：技术与项目需求匹配，参考资料真实可追溯（符合SFRD-TS-01-3.2模板要求）。

### 3. 硬件方案

#### 3.1 基本硬件构成

- **输出内容要求**：根据用户输入的硬件部署需求，明确硬件平台（如“x86服务器”“ARM架构嵌入式设备”）、CPU类型（如“Intel Xeon Gold 6330”）、内存大小（如“≥64GB DDR4”）、是否开启PAE（物理地址扩展），需说明“开启/不开启PAE的原因”（如“开启PAE——需支持超过4GB内存寻址”）。

- **格式要求**：标准markdown表格，列名为“硬件组件”“规格要求”“配置原因”。

- **评判标准**：规格满足业务需求（如高内存需求匹配内存配置），原因说明合理。

#### 3.2 专用芯片说明

- **输出内容要求**：若用户输入涉及专用芯片（如加密芯片、压缩芯片），需说明“芯片型号”“供应商”“功能（如“AES-256加密”）”“驱动支持（OS类型及版本，如“支持Linux 5.4+驱动”）”；无专用芯片需说明“无专用芯片，依赖CPU软实现”。

- **格式要求**：自然段或表格表述（多芯片用表格）。

- **评判标准**：芯片功能与项目需求匹配，驱动信息准确。

### 4. 软件方案

#### 4.1 方案选型

- **输出内容要求**：

    1. 提前规划需选型的模块/方案（仅保留与项目强相关的选型项，避免无效选型，如“无需选型的模块：基础日志模块——使用公司通用日志组件”需说明）。

    2. 对需选型项，先通过“方案选型打分表”评估（权重按重要性分配，满分5分），再通过“备选方案分析表”明确最终选择，需说明“选型结论理由”（如“方案1加权得分5.0，满足性能要求且成本最低，故选择方案1”）。

- **格式要求**：

    - 方案选型打分表：列名为“评估准则”“权重”“评估方法”“方案1（打分/加权得分）”“方案2（打分/加权得分）”“方案n（打分/加权得分）”“最终得分（满分5分）”。

    - 备选方案分析表：列名为“备选方案名称”“优点”“风险和缺点”“最终选择（是/否）”。

    - 选型结论：自然段表述，说明最终选择及理由。

- **评判标准**：无无效选型项，权重分配合理（核心准则权重≥30%），结论理由与打分表/分析表逻辑一致。

#### 4.2 软件总体架构

- **输出内容要求**：采用“4+1视图”模式描述架构，若部分视图不重要需说明“简化原因”（如“开发视图简化——使用公司标准开发目录结构，无需额外描述”）：

    1. 逻辑视图：描述功能模块划分及功能说明（如“认证模块——处理Radius/LDAP认证请求”）。

    2. 过程视图：说明性能/可用性设计（如“采用主备切换机制，故障恢复时间≤30秒”）。

    3. 物理视图：描述软件到硬件的映射（如“认证守护进程部署于应用服务器”）。

    4. 开发视图：说明开发环境模块组织（如“代码目录结构：/src/auth/（认证模块）、/src/network/（网络模块）”）。

    5. 场景视图：通过1个核心场景（如“用户认证流程”）串联前4个视图，说明模块交互关系。

- **格式要求**：分“4+1视图”5个小节，每小节含“视图描述”“核心要点（表格或分点）”。

- **评判标准**：视图覆盖项目架构核心，模块划分与后续“模块设计”一致。

#### 4.3 系统流程

- **输出内容要求**：

    1. 按用户输入的功能点（若多个功能点，自动新增“4.3.1 功能流程1”“4.3.2 功能流程2”等小节），每个流程需包含“对应需求功能点编号”“流程图与步骤说明（UML顺序图描述，步骤需含模块交互细节）”“导出的模块接口名列表（同步API/异步消息接口，仅列接口名）”。

    2. 必须包含“4.3.3 系统初始化流程”（描述模块资源分配顺序）和“4.3.4 系统退出流程”（描述模块资源销毁顺序）。

- **格式要求**：分小节表述，“接口名列表”用标准markdown表格（列名为“步骤编号”“目标模块名”“接口名”“接口类型（同步/异步）”）。

- **评判标准**：流程覆盖所有功能点，接口名与后续“模块设计”接口定义一致，初始化/退出流程无资源泄漏风险。

#### 4.4 数据结构

- **输出内容要求**：描述模块间交互的数据结构（如数据库表结构、共享内存格式、消息格式），需说明“数据存储方式”（如“MySQL 8.0数据库”“Redis集群”），若涉及专用格式需提供示例（如“消息格式：[消息头（4字节）+ 数据长度（2字节）+  payload（可变长）]”）。

- **格式要求**：分点表述，每点含“数据类型”“存储方式”“结构定义/示例”“使用模块”。

- **评判标准**：数据结构设计合理（如满足高查询效率），与系统流程数据交互需求匹配。

#### 4.5 模块设计

- **输出内容要求**：根据用户输入的模块数量（自动新增“4.5.1 模块名1”“4.5.2 模块名2”等小节），每个模块需包含：

    1. 模块系统需求：功能需求（如“模块1：认证模块——支持Radius/LDAP双认证”）、性能需求（如“认证响应时间≤100ms”）。

    2. 模块设计约束：如“禁止使用多线程”“必须依赖libauth.so动态库”。

    3. 模块职责及边界：明确“本模块负责内容”“不负责内容”（如“负责认证请求处理，不负责用户权限管理——权限管理由权限模块负责”）。

    4. 模块风险识别及对策：如“风险：高并发下认证超时——对策：增加认证请求队列，设置队列长度阈值1000”。

- **格式要求**：分小节表述，每小节含“系统需求”“设计约束”“职责边界”“风险对策”4个二级要点，核心风险加粗。

- **评判标准**：模块职责无重叠/遗漏，风险对策可落地，约束符合公司技术规范。

### 5. 关键特性设计（DFX）

#### 5.1 安全性设计

##### 5.1.1 安全兜底机制合入

- **输出内容要求**：必填项，根据产品交付形态（如“服务器软件”“嵌入式设备固件”）选择安全兜底机制（如“默认关闭非必要端口”“敏感数据加密存储（AES-256）”），不满足机制需说明“备案情况”（如“未合入XX机制——已由安全经理提交备案申请，抄送至吴义和（11582）及研发主管，备案号：SEC-2024-001”），需引用“安全兜底机制合入原则链接：[http://docs.sangfor.org/pages/viewpage.action?pageId=520981623](http://docs.sangfor.org/pages/viewpage.action?pageId=520981623)”。

- **格式要求**：分点表述，含“兜底机制名称”“实现方式”“备案情况（若适用）”“参考链接”。

- **评判标准**：机制覆盖产品核心安全风险，备案流程符合模板要求。

##### 5.1.2 威胁建模分析

- **输出内容要求**：采用STRIDE方法（欺骗、篡改、否认、信息泄露、拒绝服务、权限提升），识别模块/数据/进程的安全威胁，需包含“威胁类型”“风险等级（高/中/低）”“影响范围”“应对措施”。

- **格式要求**：标准markdown表格，列名为“威胁类型（STRIDE分类）”“风险等级”“影响范围（模块/数据）”“应对措施”“评审状态（已评审/待评审）”。

- **评判标准**：威胁无遗漏，应对措施与后续安全设计呼应，评审状态明确。

##### 5.1.3 安全设计

- **输出内容要求**：分“整体安全架构设计”“模块安全设计”（若多个模块，自动新增“[5.1.3.2](5.1.3.2) 模块1安全设计”等小节），整体架构需说明“安全防护层级”（如“网络层防火墙+应用层WAF+数据层加密”），模块设计需针对威胁建模结果提出具体方案（如“认证模块——增加验证码机制，抵御暴力破解（对应STRIDE‘欺骗’威胁）”），需符合《安全需求checklistV1.2-20241125.xlsx》L1要求。

- **格式要求**：分小节表述，引用checklist需标注“参考《安全需求checklistV1.2-20241125.xlsx》L1-XX条款”。

- **评判标准**：设计覆盖所有高/中风险威胁，符合checklist要求。

##### 5.1.4 预使用组件版本安全情况

- **输出内容要求**：说明Mend扫描结果（如“共扫描开源组件12个，无严重高危漏洞，协议风险分数均<65分”），若组件不符合要求需说明“备案情况”（如“组件XX（版本2.3）存在中危漏洞——已由安全经理分析，申请备案，抄送至吴义和（11582），待批复”），需引用“Mend扫描指导文档链接：[https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=461416029](https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=461416029)”。

- **格式要求**：自然段表述，扫描结果/备案情况加粗。

- **评判标准**：扫描结果真实，备案流程符合模板要求。

#### 5.2 可靠性设计（含韧性设计）

##### 5.2.1 能力目标定义

- **输出内容要求**：根据项目类型（参考模板3个维度）选择目标维度，目标需量化、可分解（如“故障管理维度——故障自动检测率≥99%，检测时间≤10秒；故障自动恢复率≥95%，恢复时间≤30秒”），若为中台项目需额外符合中台可靠性基线。

- **格式要求**：标准markdown表格，列名为“目标维度（故障管理/故障对象/业务功能）”“一级目标”“二级目标（分解）”“三级目标（可验证）”“验证方式”。

- **评判标准**：目标与项目类型匹配，量化指标可测试，无空项。

##### 5.2.2 故障场景分析

- **输出内容要求**：对比“现状能力”与“目标能力”的差距，识别需容错的故障场景（如“现状：硬盘故障检测时间≥5分钟——目标：≤1分钟——差距：需优化硬盘健康检测频率，新增SMART信息实时采集”），需参考《深信服故障模式库》《可靠性需求基线》。

- **格式要求**：标准markdown表格，列名为“故障场景（硬件/网络/软件/操作类）”“现状能力”“目标能力”“差距分析”“需落地设计需求”。

- **评判标准**：场景覆盖核心故障类型，差距分析准确，设计需求可落地。

##### 5.2.3 业界竞争分析

- **输出内容要求**：分析同类产品（如“友商Product X”）的可靠性指标（如“SLA 5个9”）、架构设计（如“主备双机”）、关键机制（如“内存故障检测ECC技术”），说明本项目的借鉴点（如“借鉴友商负荷分担架构，优化本项目PPS性能”）。

- **格式要求**：自然段表述，含“同类产品”“竞品可靠性分析”“借鉴点”3个要点。

- **评判标准**：竞品信息真实，借鉴点与本项目可靠性目标呼应。

##### 5.2.4 实现方案设计

- **输出内容要求**：分“冗余设计”“故障管理”“升级不中断业务”“应急恢复”4个小节，每个小节需包含“方案描述”“架构图/流程图（文字描述核心逻辑）”“能力指标”（如“冗余设计——主备双机，切换时间≤30秒”）。

- **格式要求**：分小节表述，“架构图/流程图”用文字描述关键节点（如“故障管理流程：1. 故障检测模块采集CPU利用率→2. 超过阈值（90%）触发告警→3. 故障隔离模块关闭异常进程→4. 恢复模块重启进程”）。

- **评判标准**：方案覆盖所有设计需求，能力指标达到目标定义要求。

##### 5.2.5 韧性设计

- **输出内容要求**：定义韧性目标（如“2倍业务流量下成功率≥98%，10倍流量下成功率≥93%；抗DDoS攻击——单IP无效请求≥100次/分钟时，临时封禁30分钟”），说明过载保护机制（如“Apache/Nginx超时设置3秒，流量超限触发队列缓存”）。

- **格式要求**：标准markdown表格（韧性目标）+ 自然段（过载保护机制），目标需量化。

- **评判标准**：目标符合业务过载场景，保护机制可抵御核心攻击。

#### 5.3 可测试性设计

- **输出内容要求**：说明测试接口（如“查询类接口：/api/test/queryStatus——返回模块运行状态”“故障模拟类接口：/api/test/simulateCrash——模拟进程崩溃”）、测试工具（如“深信服自动化测试平台V3.0”），若有自动化测试需说明“测试自动化率目标（如≥80%）”。

- **格式要求**：分点表述，含“测试接口（列表）”“测试工具”“自动化测试规划”“测试覆盖范围”。

- **评判标准**：接口满足测试需求，自动化规划与可测试性目标匹配。

#### 5.4 可调试性设计

- **输出内容要求**：明确调试目标（如“进程崩溃问题5分钟定位，90%问题可通过日志定位”），说明调试机制（如“日志分级：DEBUG/INFO/WARN/ERROR，日志输出至/var/log/sangfor/目录；核心模块支持gdb调试”），平台类项目需必填，非平台类需说明“非平台项目，简化调试机制——仅保留ERROR级日志”。

- **格式要求**：自然段表述，核心目标加粗。

- **评判标准**：目标量化，机制可满足调试需求，平台类项目无遗漏。

#### 5.5 可运维性设计

##### 5.5.1 可运维性目标定义

- **输出内容要求**：按“安装部署”“日常运维”“故障定位”“升级补丁”等子领域定义目标（如“安装部署——安装包<100MB，安装时长<5分钟，步骤<5步；故障定位——网络类故障5分钟定位”）。

- **格式要求**：标准markdown表格，列名为“运维子领域”“目标描述”“量化指标”“验证方式”。

- **评判标准**：目标覆盖运维全流程，指标可验证。

##### 5.5.2 可运维性设计方案

- **输出内容要求**：针对每个目标提出方案（如“安装部署目标——设计自动化安装脚本，支持静默安装；故障定位目标——开发运维监控面板，实时展示网络时延”），需包含“方案核心逻辑”“工具/脚本（如‘安装脚本：[install.sh](install.sh)’）”。

- **格式要求**：分点表述，每点对应“运维子领域”，含“方案”“工具”“落地时间”。

- **评判标准**：方案与目标一一对应，工具可落地。

#### 5.6 可扩展性设计

- **输出内容要求**：明确可扩展方向（如“功能扩展——预留API接口支持后续AI分析模块；硬件扩展——支持多节点集群，最大集群规模≥100节点”），说明扩展方式（如“功能扩展通过插件化架构，硬件扩展通过分布式协议”）。

- **格式要求**：分点表述，每点含“扩展方向”“扩展方式”“扩展约束（如‘硬件扩展需同型号服务器’）”。

- **评判标准**：扩展方向符合项目未来规划，方式设计合理。

#### 5.7 可复用性设计

##### 5.7.1 技术规范落地计划

- **输出内容要求**：根据产品线技术规范基线，明确本项目需“遵守/实现/新增/修订”的技术规范（如“遵守《深信服API设计规范V2.0》，实现《日志格式规范V1.1》”），需填写《技术规范基线计划》（说明“结果以附件形式保存，已通过技术规范委员会评审”），引用“流程说明链接：[http://docs.sangfor.org/pages/viewpage.action?pageId=97130963](http://docs.sangfor.org/pages/viewpage.action?pageId=97130963)”。

- **格式要求**：标准markdown表格，列名为“技术规范名称”“版本号”“处理方式（遵守/实现/新增/修订）”“落地进度”“评审状态”。

- **评判标准**：规范无遗漏，进度与项目周期匹配。

##### 5.7.2-5.7.4 公用代码相关

- **输出内容要求**：明确“可采用的公用代码”（如“公司通用日志组件V3.2”）、“可产出的公用代码”（如“分布式配置管理模块，计划提交至公司代码库”）、“设计文档更新约定”（如“公用代码变更需同步更新《可复用模块设计文档》”）。

- **格式要求**：分3个小节表述，每小节含“代码名称”“版本/状态”“管理方式”。

- **评判标准**：公用代码符合公司复用规范，产出代码有明确提交计划。

#### 5.8 系统隐私设计

- **输出内容要求**：说明隐私保护措施（如“用户敏感数据（手机号）加密存储（SHA-256）；日志脱敏——隐藏身份证号中间8位”），需符合《个人信息保护法》及公司隐私规范。

- **格式要求**：分点表述，每点含“隐私保护对象”“保护措施”“合规依据”。

- **评判标准**：措施覆盖所有敏感数据，合规依据明确。

#### 5.9 软件质量及效能改进设计

- **输出内容要求**：说明提升软件质量的措施（如“代码评审覆盖率≥90%，单元测试覆盖率≥80%”）、提升研发效能的举措（如“采用DevOps流水线，构建时长≤10分钟”），分析对软件设计的影响（如“单元测试覆盖率要求——模块需设计可测试的接口”）。

- **格式要求**：分“质量改进”“效能改进”“设计影响”3个要点表述。

- **评判标准**：措施可落地，设计影响分析与后续模块设计呼应。

### 6. 总结

#### 6.1 与上一个版本的设计变化

- **输出内容要求**：若为迭代版本，需自动新增“6.1.1 设计变化1”“6.1.2 设计变化2”等小节，每个变化需包含“变化原因”“变化描述”“影响范围（模块/接口）”；若为新产品/无变化，需说明“本项目为新产品，无历史版本设计变化”“本版本与上版本无总体设计变化”。

- **格式要求**：分小节表述（仅迭代版本），每小节含“变化原因”“变化描述”“影响范围”。

- **评判标准**：变化描述准确，影响范围无遗漏，新产品/无变化说明清晰。

#### 6.2 风险问题保证

- **输出内容要求**：列出总设中未完全确认的风险点（如“处理速度需达100MBPS——预研显示当前方案可达80MBPS，需优化算法”），说明“风险预研结果”“规避措施”。

- **格式要求**：标准markdown表格，列名为“风险点”“风险等级（高/中/低）”“预研结果”“规避措施”“责任人”。

- **评判标准**：风险点识别全面，规避措施可落地，责任人明确。

#### 6.3 尚未解决的问题

- **输出内容要求**：列出总设阶段未解决、需后续阶段（如概要设计）解决的问题（如“分布式一致性协议选型——需进一步评估Raft与Paxos性能”），说明“计划解决阶段”“依赖条件（如‘需预研数据支持’）”；无未解决问题需说明“总设阶段无未解决问题，所有设计需求均已明确”。

- **格式要求**：标准markdown表格（有问题）或自然段（无问题）。

- **评判标准**：问题描述清晰，解决阶段合理，依赖条件明确。

### 7. 变更控制

#### 7.1 变更列表

- **输出内容要求**：预留编码阶段设计变更记录位置，说明“编码阶段若需变更设计，需在此记录‘变更章节’‘变更内容’‘变更原因’‘对老功能/原设计的影响’，并经版本经理、开发经理评审确认；需求变更引起的设计变更需额外记录‘需求变更编号’”。

- **格式要求**：标准markdown表格（列名为“变更章节”“变更内容”“变更原因”“对老功能/原设计的影响”“评审状态”“需求变更编号（若适用）”），表格初始为空，需添加“注：编码阶段按实际变更填写”。

- **评判标准**：表格格式符合模板要求，备注说明清晰。

## 三、整体格式约束

1. 章节层级：严格遵循“1. 一级标题”“1.1 二级标题”“1.1.1 三级标题”层级，无跳级。

2. 表格：所有表格采用标准markdown格式，列名对齐，内容无换行混乱。

3. 空项处理：所有章节不得为空，不涉及内容需明确说明“本章节不涉及，原因：XXX”（如“5.8 系统隐私设计——本项目无用户敏感数据，不涉及隐私保护，原因：项目为内部运维工具，仅处理设备硬件信息”）。

4. 引用链接：所有模板要求的链接（如Mend扫描指导、安全兜底原则）需准确无误，不得修改。

5. 整合输出：最终需将所有章节按顺序整合为完整文档，无重复内容，逻辑连贯。

## 四、最终输出评判核心标准

1. 内容完整性：覆盖本提示词所有章节，无遗漏（不涉及章节有合理说明）。

2. 业务匹配度：所有设计方案、目标、选型均与用户输入的项目信息完全一致，无无关内容。

3. 模板符合性：严格遵循SFRD-TS-01-3.2模板规范（如评审要求、备案流程、引用链接），无格式错误。

4. 可落地性：技术选型无无效方案，目标量化可验证，措施可执行（如风险对策、运维方案）。

5. 自动补充能力：根据用户输入的多场景、多模块、多功能点，自动新增对应小节，无内容缺失。

> （注：文档部分内容可能由 AI 生成）
```
